{{ define "content" }}
    <div class="main-content">
        <div class="sidebar">
            <div class="maker-profile">
                <div class="maker-info">
                    <img src="{{ .user.Avatar }}" class="maker-avatar">
                    <div class="maker-name">{{ .user.Username }}</div>
                    <div class="maker-title">{{ .user.Bio }}</div>
                    <div class="maker-desc">ç¬¬ {{ .user.ID }} å·ä¼šå‘˜, {{.user.CreatedAt.Format "2006-01-02"}} åŠ å…¥æœ¬ç«™.</div>
                </div>
            </div>
            <br>
            <h3 class="sidebar-title">å‘ç°</h3>
            <ul class="sidebar-links">
                <li><a href="?sort=overview" class="active"><span class="sidebar-icon">ğŸ‘¤</span> æ¦‚è§ˆ</a></li>
                <li><a href="?sort=links"><span class="sidebar-icon">ğŸ“¦</span> æ‰€æœ‰é“¾æ¥</a></li>
                <li><a href="?sort=votes"><span class="sidebar-icon">â­</span> æŠ•ç¥¨é“¾æ¥</a></li>
                <li><a href="?sort=comments"><span class="sidebar-icon">ğŸ’¬</span> æ‰€æœ‰è¯„è®º</a></li>
                {{ if .userInfo }}
                    {{ if eq .user.ID .userInfo.ID }}
                    <li><a href="?sort=notifications"><span class="sidebar-icon">ğŸ””</span> é€šçŸ¥ä¸­å¿ƒ</a></li>
                    <li><a href="?sort=setting"><span class="sidebar-icon">âš™ï¸</span> è´¦æˆ·è®¾ç½®</a></li>
                    <li><a href="/auth/logout"><span class="sidebar-icon">âï¸</span> é€€å‡ºç™»å½•</a></li>
                    {{ end }}
                {{ end }}
            </ul>
        </div>

        <div class="content">
            {{ if eq .sort "overview" }}
            <h2>æ¦‚è§ˆ</h2>
            <div class="stats-cards">
                <a href="?sort=links" class="product-card stats-card">
                    <div class="stats-icon">ğŸ“¦</div>
                    <div class="stats-info">
                        <div class="stats-number">{{ len .user.Links }}</div>
                        <div class="stats-label">æ‰€æœ‰é“¾æ¥</div>
                    </div>
                </a>
                <a href="?sort=comments" class="product-card stats-card">
                    <div class="stats-icon">ğŸ’¬</div>
                    <div class="stats-info">
                        <div class="stats-number">{{ len .user.Comments }}</div>
                        <div class="stats-label">æ‰€æœ‰è¯„è®º</div>
                    </div>
                </a>
                <a href="?sort=votes" class="product-card stats-card">
                    <div class="stats-icon">â­</div>
                    <div class="stats-info">
                        <div class="stats-number">{{ len .user.Votes }}</div>
                        <div class="stats-label">æŠ•ç¥¨é“¾æ¥</div>
                    </div>
                </a>
            </div>
            {{ else if eq .sort "comments" }}
            <h2>æ‰€æœ‰è¯„è®º</h2>

            <div class="comment-list">
                {{ range .user.Comments }}
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author">{{ $.user.Username }}</span>
                            <span class="comment-time">{{ .CreatedAt.Format "2006-01-02 15:04" }}</span>
                            <a href="/links/{{ .LinkID }}" class="comment-time">è¯„è®ºï¼š{{ .Link.Title }}</a>
                        </div>
                        <p class="comment-text">{{ TruncateString .Content 250 }}</p>
                    </div>
                    {{else}}
                <div class="empty-state">
                    <p>ğŸ˜€ æš‚æ— è¯„è®º</p>
                </div>
                {{ end }}
            </div>
            {{ else if eq .sort "votes" }}
            <h2>æŠ•ç¥¨é“¾æ¥</h2>

            <div class="product-list">
                {{ range .user.Votes }}
                <article class="product-card">
                    <div class="product-vote">
                        <a class="vote-button" aria-label="æŠ•ç¥¨æ”¯æŒ" href="/links/{{ .Link.ID }}/vote">
                            <span aria-hidden="true">â–²</span>
                            <span class="vote-count">{{ .Link.VoteCount }}</span>
                        </a>
                    </div>
                    <div class="product-info">
                        <a href="/links/{{ .Link.ID }}" class="product-title">{{ .Link.Title }}</a>
                        <p class="product-description">{{ TruncateString .Link.Description 250 }}</p>
                        <div class="product-tags" role="list">
                            <a href="{{ .Link.URL }}" target="_blank" rel="noopener" class="tag visit-link" onclick="click_link('{{ .Link.ID }}')">è®¿é—®ç½‘ç«™ â†’</a>
                        </div>
                    </div>
                </article>
                {{else}}
                <div class="empty-state">
                    <p>ğŸ˜€ æš‚æ— æŠ•ç¥¨</p>
                </div>
                {{ end }}
            </div>
            {{ else if eq .sort "links" }}
            <h2>æ‰€æœ‰é“¾æ¥</h2>

            <div class="product-list">
                {{ range .user.Links }}
                <article class="product-card">
                    <div class="product-vote">
                        <a class="vote-button" aria-label="æŠ•ç¥¨æ”¯æŒ" href="/links/{{ .ID }}/vote">
                            <span aria-hidden="true">â–²</span>
                            <span class="vote-count">{{ .VoteCount }}</span>
                        </a>
                    </div>
                    <div class="product-info">
                        <a href="/links/{{ .ID }}" class="product-title">{{ .Title }}</a>
                        <p class="product-description">{{ TruncateString .Description 250 }}</p>
                        <div class="product-tags" role="list">
                            <a href="{{ .URL }}" target="_blank" rel="noopener" class="tag visit-link" onclick="click_link('{{ .ID }}')">è®¿é—®ç½‘ç«™ â†’</a>
                            {{ range .Tags }}
                            <a href="/tags/{{ .Name }}" class="tag" role="listitem">{{ .Name }}</a>
                            {{ end }}
                        </div>
                    </div>
                </article>
                {{else}}
                <div class="empty-state">
                    <p>ğŸ˜€ æš‚æ— é“¾æ¥</p>
                </div>
                {{ end }}
            </div>
            {{ else if eq .sort "notifications" }}
            <h2>é€šçŸ¥ä¸­å¿ƒ</h2>
            <div class="empty-state">
                <p>ğŸ˜€ åŠŸèƒ½å¼€å‘ä¸­ã€‚</p>
            </div>
            {{ else if eq .sort "setting" }}
                <h2>è´¦æˆ·è®¾ç½®</h2>
                <br>
                <form action="/user/profile" method="POST">
                    <div class="form-group">
                        <label for="Username">ç”¨æˆ·æ˜µç§°</label>
                        <input type="text" id="Username" name="Username" value="{{ .userInfo.Username }}" required>
                    </div>
                    <div class="form-group">
                        <label for="email">é‚®ç®±</label>
                        <input type="email" id="email" name="email" value="{{ .userInfo.Email }}" required>
                    </div>
                    <div class="form-group">
                        <label for="Avatar">å¤´åƒé“¾æ¥</label>
                        <input type="text" id="Avatar" name="Avatar" value="{{ .userInfo.Avatar }}" required>
                    </div>
                    <div class="form-group">
                        <label for="Bio">ä¸ªæ€§ç­¾å</label>
                        <input type="text" id="Bio" name="Bio" value="{{ .userInfo.Bio }}" required>
                    </div>
                    <div class="form-group">
                        <label for="password">å¯†ç <small>ï¼ˆä¸ä¿®æ”¹è¯·ç•™ç©ºï¼‰</small></label>
                        <input type="password" id="password" name="password">
                    </div>
                    <button type="submit" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                </form>
            {{ end }}
        </div>
    </div>
{{ end }}